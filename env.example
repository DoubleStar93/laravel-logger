# -----------------------------------------------------------------------------
# Laravel Logger (package) - env.example
# -----------------------------------------------------------------------------
# Copy the variables you need into your application's .env.
#
# Conventions used below:
# - booleans: use true|false
# - integers: use numeric values (no quotes)
#
# Notes:
# - "single" is legacy Laravel stack logging and is enabled if it's in LOG_STACK.
# - index_file is the new file-based logging and is always active for this package;
#   you only configure retention below.
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# Stack / general
# -----------------------------------------------------------------------------
# LOG_STACK
# - type: string (comma-separated list)
# - meaning: channels used by Laravel's "stack" channel (config/logging.php)
# - examples:
#   - "single"                         (only laravel.log)
#   - "daily"                          (daily laravel-YYYY-MM-DD.log)
#   - "single,opensearch"              (laravel.log + OpenSearch)
#   - "daily,opensearch,kafka"         (daily laravel log + OpenSearch + Kafka)
#   - "index_file,opensearch,kafka"    (JSONL per index + OpenSearch + Kafka)
# - possible values:
#   - any channel key that exists in your config/logging.php
#   - common built-ins: single, daily, stderr, syslog, errorlog
#   - channels provided by this package (when installed via the install command): opensearch, kafka, index_file
LOG_STACK="index_file,opensearch,kafka"

# LOG_SERVICE_NAME
# - type: string|null
# - meaning: service/application name included in logs (fallback: config('app.name'))
LOG_SERVICE_NAME="my-service"

# LOG_LEVEL
# - type: string
# - meaning: minimum level for package-provided channels (opensearch/kafka) in config/logging.php
# - possible values (PSR-3 / Monolog): debug, info, notice, warning, error, critical, alert, emergency
LOG_LEVEL="debug"

# -----------------------------------------------------------------------------
# OpenSearch
# -----------------------------------------------------------------------------
# OPENSEARCH_URL
# - type: string (URL)
# - example: "http://localhost:9200"
OPENSEARCH_URL="http://localhost:9200"

# OPENSEARCH_DEFAULT_INDEX
# - type: string
# - meaning: fallback index if no index is specified by the document builder
OPENSEARCH_DEFAULT_INDEX="general_log"

# OPENSEARCH_USERNAME / OPENSEARCH_PASSWORD
# - type: string
# - meaning: basic auth credentials (leave empty for no auth)
OPENSEARCH_USERNAME=""
OPENSEARCH_PASSWORD=""

# OPENSEARCH_VERIFY_TLS
# - type: boolean
# - possible values: true|false
# - meaning: verify TLS certificates when using https
OPENSEARCH_VERIFY_TLS=true

# OPENSEARCH_TIMEOUT
# - type: integer (seconds)
# - meaning: request timeout
OPENSEARCH_TIMEOUT=2

# OPENSEARCH_SILENT
# - type: boolean
# - possible values: true|false
# - meaning: swallow transport errors (true) vs throw (false)
OPENSEARCH_SILENT=true

# -----------------------------------------------------------------------------
# Kafka (via HTTP Kafka REST Proxy)
# -----------------------------------------------------------------------------
# Kafka payload shape (record.value):
# - This package sends *one record per log event*.
# - The JSON "value" is built as:
#     { "<log_index>": { ...LogObjectFields, "@timestamp": "..." } }
#   Example:
#     { "api_log": { "@timestamp": "2026-01-22T10:11:12+00:00", "message": "api_request", "method": "GET", "path": "/api/ping", ... } }
#
# KAFKA_REST_PROXY_URL
# - type: string (URL)
KAFKA_REST_PROXY_URL="http://localhost:8082"

# KAFKA_LOG_TOPIC
# - type: string
KAFKA_LOG_TOPIC="laravel-logs"

# KAFKA_LOG_TIMEOUT
# - type: integer (seconds)
KAFKA_LOG_TIMEOUT=2

# KAFKA_LOG_SILENT
# - type: boolean
# - possible values: true|false
# - meaning: swallow transport errors (true) vs throw (false)
KAFKA_LOG_SILENT=true

# -----------------------------------------------------------------------------
# Job Logging
# -----------------------------------------------------------------------------
# LOG_JOB_ENABLED
# - type: boolean
# - possible values: true|false
# - meaning: automatically log job execution events (JobProcessed, JobFailed) to job_log index
# - default: true
# - tracks: job name, duration, status, attempts, memory usage, frequency (for cron jobs), output
LOG_JOB_ENABLED=true

# -----------------------------------------------------------------------------
# ORM / Database logging
# -----------------------------------------------------------------------------
# LOG_ORM_ENABLED
# - type: boolean
# - possible values: true|false
# - meaning: logs DB queries (QueryExecuted) and Eloquent model events (created/updated/deleted)
#            as unified orm_log objects. Each ORM operation generates a single log entry
#            that combines query SQL/bindings/duration with model previous_value/after_value.
LOG_ORM_ENABLED=false

# LOG_ORM_LOG_READ_OPERATIONS
# - type: boolean
# - possible values: true|false
# - meaning: logs SELECT queries (read operations) in addition to write operations
# - default: false (only logs INSERT, UPDATE, DELETE by default)
LOG_ORM_LOG_READ_OPERATIONS=false

# LOG_ORM_SLOW_QUERY_THRESHOLD_MS
# - type: integer (milliseconds)
# - meaning: marks queries slower than this threshold as slow (warning)
LOG_ORM_SLOW_QUERY_THRESHOLD_MS=1000

# -----------------------------------------------------------------------------
# Middleware
# -----------------------------------------------------------------------------
# LOG_MIDDLEWARE_REQUEST_ID
# - type: boolean
# - possible values: true|false
# - meaning: enables RequestId middleware (propagates/creates request id)
LOG_MIDDLEWARE_REQUEST_ID=true

# LOG_REQUEST_ID_HEADER
# - type: string
# - meaning: header name used to read/write the request id
LOG_REQUEST_ID_HEADER="X-Request-Id"

# LOG_MIDDLEWARE_API_ACCESS
# - type: boolean
# - possible values: true|false
# - meaning: enables API access logging middleware
LOG_MIDDLEWARE_API_ACCESS=true

# LOG_MIDDLEWARE_FLUSH_DEFERRED
# - type: boolean
# - possible values: true|false
# - meaning: flush deferred logs at end of request
LOG_MIDDLEWARE_FLUSH_DEFERRED=true

# -----------------------------------------------------------------------------
# index_file (new file-based logging channel) - retention only
# -----------------------------------------------------------------------------
# LOG_INDEX_FILE_RETENTION_DAYS
# - type: integer (days)
# - meaning: keep last N days of JSONL files in storage/logs/laravel-logger
# - possible values:
#   - 0  => no pruning (keep everything)
#   - 1  => keep only today's files
#   - 7  => keep today + previous 6 days
LOG_INDEX_FILE_RETENTION_DAYS=14

# -----------------------------------------------------------------------------
# Log Size Limits
# -----------------------------------------------------------------------------
# LOG_MAX_REQUEST_BODY_SIZE
# - type: integer (bytes)
# - meaning: maximum size for request body in API access logs (truncated if larger)
# - default: 10240 (10KB)
LOG_MAX_REQUEST_BODY_SIZE=10240

# LOG_MAX_RESPONSE_BODY_SIZE
# - type: integer (bytes)
# - meaning: maximum size for response body in API access logs (truncated if larger)
# - default: 10240 (10KB)
LOG_MAX_RESPONSE_BODY_SIZE=10240

# LOG_MAX_BINDINGS_SIZE
# - type: integer (bytes)
# - meaning: maximum size for SQL bindings in ORM logs (truncated if larger)
# - default: 2048 (2KB)
LOG_MAX_BINDINGS_SIZE=2048

# -----------------------------------------------------------------------------
# Deferred Logger (Memory Management)
# -----------------------------------------------------------------------------
# LOG_DEFERRED_MAX_LOGS
# - type: integer (number of logs)
# - meaning: maximum number of logs to accumulate in memory before automatically flushing
# - default: 1000 (~1 MB based on average log size)
# - possible values:
#   - 0 or null => disable limit (not recommended in production)
#   - positive integer => auto-flush when this many logs are accumulated
# - note: when limit is reached, all accumulated logs are flushed and execution continues normally
LOG_DEFERRED_MAX_LOGS=1000

# LOG_DEFERRED_WARN_ON_LIMIT
# - type: boolean
# - possible values: true|false
# - meaning: whether to log a warning when the limit is reached and auto-flush is triggered
# - default: true
# - note: useful for monitoring memory usage patterns and identifying requests/jobs that generate many logs
LOG_DEFERRED_WARN_ON_LIMIT=true

